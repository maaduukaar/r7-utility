<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –°–ø–∏—Å–∫–æ–≤ –§—É–Ω–∫—Ü–∏–π</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤</h1>
            <p class="mt-2 text-slate-600">–í—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–∫–∏ –≤ –ø–æ–ª—è –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ä–∞–∑–ª–∏—á–∏—è.</p>
        </header>

        <!-- –ü–∞–Ω–µ–ª–∏ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="bg-white p-6 rounded-xl shadow-md">
                <label for="list1" class="block text-lg font-semibold mb-3 text-slate-700">–û—Ä–∏–≥–∏–Ω–∞–ª</label>
                <textarea id="list1"
                    class="w-full h-80 p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out resize-none"
                    placeholder="–•–ò2–û–ë–†&#10;–•–ò2–†–ê–°–ü&#10;–•–ò2–¢–ï–°–¢&#10;..."
                    onfocus="this.select()"></textarea>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-md">
                <label for="list2" class="block text-lg font-semibold mb-3 text-slate-700">–ö–æ–ø–∏—è</label>
                <textarea id="list2"
                    class="w-full h-80 p-4 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out resize-none"
                    placeholder="–ß–ê–°–¢–û–¢–ê&#10;–≠–ö–°–ü.–†–ê–°–ü&#10;–≠–ö–°–ü–†–ê–°–ü&#10;..."
                    onfocus="this.select()"></textarea>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
        <div class="text-center mb-8">
            <button id="compareBtn"
                class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 active:scale-95 transition-transform duration-150 ease-in-out shadow-lg">
                –°—Ä–∞–≤–Ω–∏—Ç—å —Å–ø–∏—Å–∫–∏
            </button>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="results-container" class="space-y-6">
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ —Å –ø–æ–º–æ—â—å—é JavaScript -->
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        function copyResult(element) {
            const textToCopy = element.textContent;

            // –ò—Å–ø–æ–ª—å–∑—É–µ–º document.execCommand –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –≤ iframe
            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            textArea.style.position = "fixed"; 
            textArea.style.opacity = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                // –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                const originalText = element.textContent;
                const originalClasses = element.className;

                element.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!';
                element.className = originalClasses.replace('bg-slate-100', 'bg-green-200');
                
                setTimeout(() => {
                    element.textContent = originalText;
                    element.className = originalClasses;
                }, 2000);
            } catch (err) {
                console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç', err);
                element.textContent = '–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏!';
                 setTimeout(() => {
                    element.textContent = textToCopy;
                }, 2000);
            }
            
            document.body.removeChild(textArea);
        }

        document.getElementById('compareBtn').addEventListener('click', () => {
            const list1Text = document.getElementById('list1').value;
            const list2Text = document.getElementById('list2').value;

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞
            const parseFunctions = (text) => {
                if (!text) return new Set();
                const functions = text
                    .split(/[;\n\s]+/) 
                    .map(fn => fn.trim().replace(/[.,]$/, '').toUpperCase()) // –£–¥–∞–ª—è–µ–º —Ç–æ—á–∫–∏/–∑–∞–ø—è—Ç—ã–µ –≤ –∫–æ–Ω—Ü–µ
                    .filter(fn => fn.length > 0);
                return new Set(functions);
            };

            const set1 = parseFunctions(list1Text);
            const set2 = parseFunctions(list2Text);

            const onlyInList1 = [...set1].filter(fn => !set2.has(fn));
            const onlyInList2 = [...set2].filter(fn => !set1.has(fn));
            const commonFunctions = [...set1].filter(fn => set2.has(fn));

            const resultsContainer = document.getElementById('results-container');
            resultsContainer.innerHTML = '';

            if (set1.size === 0 && set2.size === 0) {
                resultsContainer.innerHTML = `
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg shadow-md" role="alert">
                        <p class="font-bold">–ü–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ –ø—É—Å—Ç—ã</p>
                        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–ø–∏—Å–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.</p>
                    </div>`;
                return;
            }

            if (onlyInList1.length === 0 && onlyInList2.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg shadow-md" role="alert">
                        <p class="font-bold">üéâ –°–ø–∏—Å–∫–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã!</p>
                        <p>–ù–∞–π–¥–µ–Ω–æ ${commonFunctions.length} –æ–±—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π.</p>
                    </div>`;
                return;
            }

            const createResultBlock = (title, items, color) => {
                if (items.length === 0) return '';
                const listContent = items.sort().join('; ') + ';';
                
                return `
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h3 class="text-lg font-semibold mb-3 border-b pb-2 text-slate-800">
                            ${title} <span class="text-sm font-normal bg-${color}-100 text-${color}-800 py-1 px-2 rounded-full">${items.length}</span>
                        </h3>
                        <div class="bg-slate-100 p-4 rounded-lg text-sm break-words select-all cursor-pointer transition-colors duration-200"
                             title="–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"
                             onclick="copyResult(this)">${listContent}</div>
                    </div>
                `;
            };

            let resultsHtml = '';
            const block1 = createResultBlock('–ü—Ä–æ–ø—É—â–µ–Ω–æ –≤ –∫–æ–ø–∏–∏', onlyInList1, 'red');
            const block2 = createResultBlock('–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ', onlyInList2, 'emerald');
            const commonBlock = createResultBlock('–û–±—â–∏–µ –¥–ª—è –æ–±–æ–∏—Ö —Å–ø–∏—Å–∫–æ–≤', commonFunctions, 'sky');

            if (block1 && block2) {
                resultsHtml += `<div class="grid grid-cols-1 md:grid-cols-2 gap-6">${block1}${block2}</div>`;
            } else {
                resultsHtml += block1 + block2;
            }
            
            if(commonBlock) {
                 resultsHtml += `<div class="mt-6">${commonBlock}</div>`;
            }

            resultsContainer.innerHTML = resultsHtml;
        });
    </script>
</body>
</html>

